## CAP理论
cap理论：一个分布式系统不能同时满足C（一致性）、A（可用性）、P（分区容错性）。分区容错在分布式系统必须要保证；zookeeper保证CP，eureka保证AP

## zk以及eureka区别详细介绍

### 1、zookeeper保证cp

当向注册中心查询服务列表时，我们可以容忍注册中心返回的是几分钟前的注册信息，但是不能接受服务直接down掉不可用，即服务注册功能对于可用性的要求高于一致性，但是zk会出现一个这样的情况，当master节点因为网络故障与其他节点失去联系的时,剩余节点会重新选取新的leader，但是对于选举来说,时间过长,通常须要30~120s,且选举期间整个zk集群不可用，这会导致选举期间的注册服务瘫痪，在云部署的环境下，因网络问题使得zk集群失去master节点是大概率事件，虽然服务可以恢复，但是选举的时间导致注册长期不可用是不能容忍的；

### 2、eureka保证ap

eureka在设计时，优先保证了可用性。Eureka各个节点都是平等的，几个节点挂掉不会影响正常的节点工作，剩余节点可以提供注册和查询服务。而eureka的客户端在向某个eureka注册的时如果发现连接失败，则会自动切换到其他节点，只要还有一个节点在，就能保证注册服务可用。只不过查到的信息可能不是最新的（不保证强一致性）。Eureka还有一种自我保护机制，如果在15分钟内超过85%的节点都没有正常的心跳，那么他就认为客户端和注册中心出现了网络故障，会出现以下几种情况：
  
  （1）eureka不再从注册列表中移除因为长时间没有收到心跳而应该过期的服务；
  
  （2）eureka仍然能够接受新服务的注册和查询请求，但是不会被同步到其他节点上（即保证当前的节点依然可用）
  
  （3）当网络稳定时，当前实例新的注册信息会被同步到其他节点中；

## 总结
Eureka作为单纯的服务注册中心来说要被zookeeper更加专业，因为注册服务更重要的是可用性，可以接受短期的不一致性，不过eureka目前1.x版本的实现是基于servlet的java web应用，他的极限性能肯定会受到影响。
